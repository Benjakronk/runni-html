<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Modul 1: Ekstra Kodeprosjekter</title>
  <link rel="stylesheet" href="main.css"/>

  <style>
    /* Layout */
    .projects-grid { display:grid; gap:16px; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); }
    .project-card { border: 1px solid #e5e7eb; border-radius: 14px; padding: 16px; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,.05); }
    .project-header { display:flex; align-items:center; gap:10px; }
    .project-icon { font-size: 1.6rem; }
    .project-title { font-weight: 700; font-size: 1.1rem; flex:1; }
    .project-difficulty { font-size:.85rem; padding:.2rem .5rem; border-radius:999px; border:1px solid #e5e7eb; }
    .difficulty-beginner { background: #eef7ff; border-color:#cfe6ff; color:#0369a1; }
    .difficulty-intermediate { background:#eefce8; border-color:#c7f0b9; color:#166534; }

    /* L√•ser & knapper */
    .locked-card { opacity:.9; filter: grayscale(.05); }
    .select-btn { width:100%; margin-top:12px; border:1px solid #94a3b8; background:#f8fafc; padding:10px 12px; border-radius:10px; cursor:pointer; font-weight:700; }
    .select-btn:hover:enabled { background:#eef2f7; }
    .select-btn:disabled { background:#e5e7eb; color:#6b7280; border-color:#d1d5db; cursor:not-allowed; }

    /* Piller (krav/anbefalinger) */
    .prereq-list { margin-top:12px; font-size:.92rem; }
    .prereq-list .pill { display:inline-flex; align-items:center; gap:6px; border:1px solid #e5e7eb; padding:4px 10px; border-radius:999px; margin:6px 6px 0 0; white-space:nowrap; }
    .pill.required { background:#fff7ed; border-color:#fed7aa; color:#9a3412; }
    .pill.recommended { background:#f1f5f9; color:#334155; }
    .pill.good { background:#ecfdf5; border-color:#bbf7d0; color:#065f46; }
    .pill.locked { background:#ffe4e6; border-color:#fecdd3; color:#9f1239; }
    .pill.idea { background:#e2e8f0; color:#334155; }

    /* Detaljer */
    .project-details { margin-top:20px; border: 1px dashed #e5e7eb; border-radius:14px; padding:16px; background:#fff; }
    .project-details h3 { margin-top:0; }
    .project-features { margin: 8px 0 0 18px; }
    .code-example { margin-top:8px; padding:10px; background:#f8fafc; border:1px solid #e5e7eb; border-radius:10px; overflow:auto; }
    .bonus-box { background:#f8fafc; border: 1px solid #e5e7eb; border-radius:12px; padding:12px; margin-top:16px; }
    .bonus-box ul { margin:8px 0 0 18px; }
    .hint { font-size:.9rem; color:#64748b; }
    .locked-msg { padding:12px; border-radius:10px; background:#fff1f2; border:1px solid #fecdd3; color:#9f1239; margin-top:10px; }
  </style>
</head>
<body>
  <a href="index.html" class="home-button">
    <span>üè†</span>
    <span class="home-button-text">Tilbake til hjem</span>
  </a>

  <div class="container">
    <div class="course-container">
      <h1>üöÄ Kodeprosjekter ‚Äì Modul 1</h1>

      <div class="intro">
        <p>Prosjektene l√•ses opp n√•r p√•krevde leksjoner i Modul 1 er fullf√∏rt.  
        Anbefalte leksjoner i Modul 2 (CSS) og Modul 3 (JavaScript) gir <em>bonusm√•l</em> og hjelper deg √• ta prosjektet et steg videre.</p>
      </div>

      <div class="projects-grid">
        <!-- Prosjekt 1 -->
        <div class="project-card" id="project1">
          <div class="project-header">
            <div class="project-icon">üë§</div>
            <div class="project-title">Personlig Visittkort</div>
            <div class="project-difficulty difficulty-beginner">Nybegynner</div>
          </div>
          <p>Lag ditt eget digitale visittkort med bilde, kontaktinfo og favoritter.</p>
          <div class="prereq-list" id="badge1"></div>
          <button class="select-btn" data-project="1">Velg dette prosjektet</button>
        </div>

        <!-- Prosjekt 2 -->
        <div class="project-card" id="project2">
          <div class="project-header">
            <div class="project-icon">üìù</div>
            <div class="project-title">Mini-blogg</div>
            <div class="project-difficulty difficulty-intermediate">Middels</div>
          </div>
          <p>Lag en liten blogg med forside, flere artikler og enkel navigasjon.</p>
          <div class="prereq-list" id="badge2"></div>
          <button class="select-btn" data-project="2">Velg dette prosjektet</button>
        </div>

        <!-- Prosjekt 3 -->
        <div class="project-card" id="project3">
          <div class="project-header">
            <div class="project-icon">‚úàÔ∏è</div>
            <div class="project-title">Reiseplanlegger</div>
            <div class="project-difficulty difficulty-intermediate">Middels</div>
          </div>
          <p>Design en reiseplan med destinasjoner, budsjett og pakkeliste.</p>
          <div class="prereq-list" id="badge3"></div>
          <button class="select-btn" data-project="3">Velg dette prosjektet</button>
        </div>
      </div>

      <div id="projectDetails" class="project-details">
        <h3 id="selectedProjectTitle">Velg et prosjekt for √• se detaljer</h3>
        <div id="selectedProjectContent"></div>
      </div>
    </div>
  </div>

  <script>
    /* ============================
       N√∏kler i LocalStorage (med alias)
       ============================ */
    // Modul 1 ‚Äì p√•krevde (l√•ser opp). St√∏tter flere alias for robusthet.
    const M1_KEYS = {
      grunnleggende: ['modul1_grunnleggende_completed', 'modul1_completed'],
      bilder:        ['modul1_bilder_completed'],
      navigasjon:    ['modul1_navigasjon_completed', 'modul1_videre_completed'],
      tabeller:      ['modul1_tabeller_completed']
    };

    // Modul 2 ‚Äì anbefalte (bonusm√•l)
    const M2_KEYS = {
      intro:      ['modul2_css_intro_completed'],
      selektorer: ['modul2_selektorer_completed'],
      layout:     ['modul2_layout_completed'],
      responsive: ['modul2_responsive_completed']
    };

    // Modul 3 ‚Äì anbefalte (bonusm√•l)
    const M3_KEYS = {
      jsIntro: ['modul3_js_intro_completed'],
      dom:     ['modul3_dom_completed'],
      events:  ['modul3_events_completed']
    };

    /* ============================
       Prosjektregler og tekst
       ============================ */
    const PROJECT_RULES = {
      1: {
        title: "üë§ Personlig Visittkort",
        required: ['grunnleggende','bilder'],
        recommended: { m2: ['intro','selektorer','layout'], m3: [] },
        description: "Perfekt for √• samle din info og vise den pent.",
        starter: `&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>  &lt;title&gt;[Ditt navn] - Visittkort&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;!-- Din kode her --&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;`,
        requirements: [
          "Hovedoverskrift med navnet ditt",
          "Et bilde (portrett eller avatar)",
          "Kort beskrivelse / bio",
          "Kontaktinfo (e-post, telefon)",
          "Lenker til sosiale medier",
          "Minst √©n liste (interesser/ferdigheter)"
        ],
        tips: "Hold det ryddig og lesbart. Bruk klasse-selektorer for gjenbrukbar styling.",
        bonus: [
          { key:'m2', label:'CSS-bonus', items:[
            'Legg til pen typografi (line-height, letter-spacing)',
            'Bruk HSL-farger for tema',
            'Bruk padding/margin for god luft'
          ]}
        ]
      },
      2: {
        title: "üìù Mini-blogg",
        required: ['grunnleggende','navigasjon'],
        recommended: { m2: ['layout','responsive'], m3: ['jsIntro','events'] },
        description: "Lag en forside med oversikt og minst tre artikler.",
        starter: `&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>  &lt;title&gt;Min Blogg&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;!-- Navigasjon + innhold --&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;`,
        requirements: [
          "Forside med lenker til artikler",
          "Minst 3 artikler med tittel, dato og br√∏dtekst",
          "Navigasjonsmeny",
          "Bilder/lenker inne i artiklene"
        ],
        tips: "Hold filstruktur ryddig: /index.html + /artikler/*.html.",
        bonus: [
          { key:'m2', label:'CSS-bonus', items:[
            'Lag kortlayout for forsiden (cards)',
            'Gj√∏r bloggen responsiv (1‚Üí2‚Üí3 kolonner)',
            'Zebra-striper p√• lister/tabeller'
          ]},
          { key:'m3', label:'JS-bonus', items:[
            'Kommentarfelt med appendChild',
            'Live-s√∏k som filtrerer artikler (input-event)'
          ]}
        ]
      },
      3: {
        title: "‚úàÔ∏è Reiseplanlegger",
        required: ['navigasjon','tabeller','bilder'],
        recommended: { m2: ['responsive','layout'], m3: ['jsIntro','dom'] },
        description: "Planlegg destinasjoner, budsjett og pakkeliste.",
        starter: `&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>  &lt;title&gt;Reiseplan&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>  &lt;!-- Seksjoner: m√•l, budsjett, pakkeliste --&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;`,
        requirements: [
          "Seksjoner for m√•l, budsjett og pakkeliste",
          "En tabell (reiseplan/budsjett)",
          "Minst 3 bilder med alt-tekst",
          "Interne lenker mellom seksjoner"
        ],
        tips: "Bruk tabeller for strukturert data og <section>-id-er for intern navigasjon.",
        bonus: [
          { key:'m2', label:'CSS-bonus', items:[
            'Responsivt oppsett for sm√•/mellom/store skjermer',
            'Maks-bredde p√• container + flytende bredder',
            'Pen tabellstil'
          ]},
          { key:'m3', label:'JS-bonus', items:[
            'Knapp som legger til nye pakkeliste-punkter',
            'Budsjett-summering (les tall i tabell og summer)'
          ]}
        ]
      }
    };

    /* ============================
       Hjelpere
       ============================ */
    function isTrueAny(keys){
      if (!keys) return false;
      const arr = Array.isArray(keys) ? keys : [keys];
      return arr.some(k => localStorage.getItem(k) === 'true');
    }

    function humanM1(key){ return {grunnleggende:'Grunnleggende HTML', bilder:'Bilder & multimedia', navigasjon:'Flersidig nettsted & navigasjon', tabeller:'Tabeller & skjema'}[key]||key; }
    function humanM2(key){ return {intro:'CSS: introduksjon', selektorer:'CSS: selektorer & farger', layout:'CSS: box model & layout', responsive:'CSS: responsivt design'}[key]||key; }
    function humanM3(key){ return {jsIntro:'JS: introduksjon', dom:'JS: DOM-manipulering', events:'JS: events & interaksjon'}[key]||key; }

    function hasAllRequired(num){
      return PROJECT_RULES[num].required.every(k => isTrueAny(M1_KEYS[k]));
    }
    function missingRequired(num){
      return PROJECT_RULES[num].required.filter(k => !isTrueAny(M1_KEYS[k])).map(humanM1);
    }

    function recommendedBadges(num){
      const rec = PROJECT_RULES[num].recommended || {};
      const out = [];
      (rec.m2 || []).forEach(k => out.push({label: humanM2(k), done: isTrueAny(M2_KEYS[k])}));
      (rec.m3 || []).forEach(k => out.push({label: humanM3(k), done: isTrueAny(M3_KEYS[k])}));
      return out;
    }

    function renderBadges(num){
      const box = document.getElementById('badge'+num);
      if (!box) return;
      box.innerHTML = '';

      // P√•krevde (M1)
      PROJECT_RULES[num].required.forEach(k=>{
        const ok = isTrueAny(M1_KEYS[k]);
        const pill = document.createElement('span');
        pill.className = 'pill required ' + (ok ? 'good' : 'locked');
        pill.innerHTML = (ok ? '‚úÖ ' : 'üîí ') + humanM1(k);
        box.appendChild(pill);
      });

      // Anbefalte (M2/M3)
      recommendedBadges(num).forEach(r=>{
        const pill = document.createElement('span');
        pill.className = 'pill recommended ' + (r.done ? 'good' : 'idea');
        pill.innerHTML = (r.done ? '‚úÖ ' : 'üí° ') + r.label;
        box.appendChild(pill);
      });
    }

    function applyLocks(){
      [1,2,3].forEach(num=>{
        const card = document.getElementById('project'+num);
        const btn = card.querySelector('.select-btn');
        const unlocked = hasAllRequired(num);
        card.classList.toggle('locked-card', !unlocked);
        btn.disabled = !unlocked;
        renderBadges(num);
      });
    }

    function projectDetailHTML(num){
      const p = PROJECT_RULES[num];

      if (!hasAllRequired(num)) {
        return `<div class="locked-msg">üîí Dette prosjektet er l√•st.<br>Mangler: ${missingRequired(num).join(', ')}</div>`;
      }

      // Bonusm√•l ‚Äì markeres som ‚Äútilgjengelig‚Äù n√•r anbefalte er fullf√∏rt
      const rec = p.recommended || {};
      const m2Unlocked = (rec.m2||[]).every(k => isTrueAny(M2_KEYS[k]));
      const m3Unlocked = (rec.m3||[]).every(k => isTrueAny(M3_KEYS[k]));

      const bonusHTML = (p.bonus && p.bonus.length) ? `
        <div class="bonus-box">
          <strong>Bonusm√•l (fra anbefalte leksjoner):</strong>
          <ul>
            ${p.bonus.map(group=>{
              const unlocked = (group.key === 'm2') ? m2Unlocked : m3Unlocked;
              const icon = unlocked ? '‚úÖ' : 'üí°';
              return `
                <li>
                  <em>${icon} ${group.label} ${unlocked ? '‚Äì tilgjengelig' : '‚Äì anbefalt'}</em>
                  <ul>${group.items.map(i=>`<li>${i}</li>`).join('')}</ul>
                </li>
              `;
            }).join('')}
          </ul>
          <div class="hint">Tips: Fullf√∏r anbefalte leksjoner i Modul 2/3 for √• gj√∏re disse enklere.</div>
        </div>
      ` : '';

      return `
        <p>${p.description}</p>
        <h4>Krav</h4>
        <ul class="project-features">${p.requirements.map(r=>`<li>${r}</li>`).join('')}</ul>
        <h4>Starterkode</h4>
        <div class="code-example">${p.starter}</div>
        <h4>Tips</h4>
        <p>${p.tips}</p>
        ${bonusHTML}
      `;
    }

    function selectProject(num){
      const title = document.getElementById('selectedProjectTitle');
      const content = document.getElementById('selectedProjectContent');
      title.innerText = PROJECT_RULES[num].title;
      content.innerHTML = projectDetailHTML(num);
      if (hasAllRequired(num)) {
        localStorage.setItem('selectedExtraProject', String(num));
      }
      window.scrollTo({ top: document.getElementById('projectDetails').offsetTop - 20, behavior:'smooth' });
    }

    // Koble knapper og init
    document.addEventListener('DOMContentLoaded', () => {
      // Liten migrering for alias (gj√∏r forsiden/prosjekt enig uansett gammel n√∏kkel)
      if (localStorage.getItem('modul1_grunnleggende_completed') === 'true')
        localStorage.setItem('modul1_completed', 'true');
      if (localStorage.getItem('modul1_navigasjon_completed') === 'true')
        localStorage.setItem('modul1_videre_completed', 'true');

      applyLocks();

      // Bind knapper (ingen inline onclick)
      document.querySelectorAll('.select-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const num = Number(e.currentTarget.getAttribute('data-project'));
          selectProject(num);
        });
      });

      // Gjen√•pne sist valgte (hvis oppl√•st)
      const saved = localStorage.getItem('selectedExtraProject');
      if (saved && hasAllRequired(Number(saved))) {
        selectProject(Number(saved));
      }
    });

    function initProjectsPage() {
    // Liten migrering for alias
    if (localStorage.getItem('modul1_grunnleggende_completed') === 'true')
      localStorage.setItem('modul1_completed', 'true');
    if (localStorage.getItem('modul1_navigasjon_completed') === 'true')
      localStorage.setItem('modul1_videre_completed', 'true');

    applyLocks();

    // Bind knapper (ingen inline onclick)
    document.querySelectorAll('.select-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const num = Number(e.currentTarget.getAttribute('data-project'));
        selectProject(num);
      });
    });

    // Gjen√•pne sist valgte (hvis oppl√•st)
    const saved = localStorage.getItem('selectedExtraProject');
    if (saved && hasAllRequired(Number(saved))) {
      selectProject(Number(saved));
    }
  }

  // Kj√∏r init enten n√• eller ved DOMContentLoaded ‚Äì hva som enn kommer f√∏rst
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initProjectsPage, { once: true });
  } else {
    initProjectsPage();
  }

  // Oppdater kort hvis localStorage endres i en annen fane
  window.addEventListener('storage', applyLocks);
</script>

    // Oppdater kort hvis localStorage endres i en annen fane
    window.addEventListener('storage', () => {
      applyLocks();
    });
  </script>
</body>
</html>
